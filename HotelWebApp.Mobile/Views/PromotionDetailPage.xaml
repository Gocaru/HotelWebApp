<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HotelWebApp.Mobile.ViewModels"
             x:Class="HotelWebApp.Mobile.Views.PromotionDetailPage"
             Title="Promotion Details"
             BackgroundColor="#F5F5F5">

    <ScrollView>
        <VerticalStackLayout Padding="0" Spacing="0">

            <Frame Padding="0"
                   CornerRadius="0"
                   HasShadow="False"
                   HeightRequest="200"
                   BackgroundColor="#E0E7FF">
                <Label Text="🎁" 
                       FontSize="96" 
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
            </Frame>

            <VerticalStackLayout Padding="15" Spacing="15">

                <ActivityIndicator IsRunning="{Binding IsBusy}"
                                   IsVisible="{Binding IsBusy}"
                                   Color="#1E3A8A"
                                   HeightRequest="50"/>

                <Frame IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotEmptyConverter}}"
                       BackgroundColor="#FEE2E2"
                       BorderColor="#EF4444"
                       CornerRadius="10"
                       Padding="15"
                       HasShadow="False">
                    <Label Text="{Binding ErrorMessage}"
                           TextColor="#991B1B"
                           FontSize="14"/>
                </Frame>

                <VerticalStackLayout Spacing="15" IsVisible="{Binding Promotion, Converter={StaticResource ObjectNotNullConverter}}">

                    <VerticalStackLayout Spacing="8">
                        <Label Text="{Binding Promotion.Title}" 
                               FontSize="24" 
                               FontAttributes="Bold"
                               TextColor="#1F2937"/>
                        <Frame Padding="8,4" 
                               CornerRadius="5"
                               BackgroundColor="{Binding Promotion.StatusColor}"
                               HasShadow="False"
                               HorizontalOptions="Start">
                            <Label Text="{Binding Promotion.StatusText}" 
                                   TextColor="White" 
                                   FontSize="12"
                                   FontAttributes="Bold"/>
                        </Frame>
                    </VerticalStackLayout>

                    <Frame Padding="20" 
                           CornerRadius="15" 
                           HasShadow="False"
                           BackgroundColor="#10B981">
                        <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                            <Label Text="SAVE" 
                                   FontSize="20" 
                                   FontAttributes="Bold"
                                   TextColor="White"
                                   VerticalOptions="Center"/>
                            <Label Text="{Binding Promotion.FormattedDiscount}" 
                                   FontSize="48" 
                                   FontAttributes="Bold"
                                   TextColor="White"/>
                        </HorizontalStackLayout>
                    </Frame>

                    <Frame Padding="15" 
                           CornerRadius="10" 
                           HasShadow="False"
                           BackgroundColor="White">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="📋 Description" 
                                   FontSize="16" 
                                   FontAttributes="Bold"
                                   TextColor="#1E3A8A"/>
                            <Label Text="{Binding Promotion.Description}" 
                                   FontSize="14" 
                                   TextColor="#374151"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Frame>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Frame Grid.Column="0" 
                               Padding="15" 
                               CornerRadius="10" 
                               HasShadow="False"
                               BackgroundColor="White">
                            <VerticalStackLayout Spacing="5">
                                <Label Text="📅 Start Date" 
                                       FontSize="12" 
                                       TextColor="#6B7280"/>
                                <Label Text="{Binding Promotion.StartDate, StringFormat='{0:MMM dd, yyyy}'}" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       TextColor="#1F2937"/>
                            </VerticalStackLayout>
                        </Frame>

                        <Frame Grid.Column="1" 
                               Padding="15" 
                               CornerRadius="10" 
                               HasShadow="False"
                               BackgroundColor="White">
                            <VerticalStackLayout Spacing="5">
                                <Label Text="⏰ End Date" 
                                       FontSize="12" 
                                       TextColor="#6B7280"/>
                                <Label Text="{Binding Promotion.EndDate, StringFormat='{0:MMM dd, yyyy}'}" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       TextColor="#1F2937"/>
                            </VerticalStackLayout>
                        </Frame>
                    </Grid>

                    <Frame Padding="15" 
                           CornerRadius="10" 
                           HasShadow="False"
                           BackgroundColor="#EFF6FF"
                           BorderColor="#1E3A8A">
                        <VerticalStackLayout Spacing="5">
                            <Label Text="ℹ️ How to Use" 
                                   FontSize="14" 
                                   FontAttributes="Bold"
                                   TextColor="#1E3A8A"/>
                            <Label Text="This discount will be automatically applied when you book eligible rooms during the promotion period." 
                                   FontSize="12" 
                                   TextColor="#374151"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Padding="15" 
                           CornerRadius="10" 
                           HasShadow="False"
                           BackgroundColor="White"
                           IsVisible="{Binding Promotion.Terms, Converter={StaticResource StringNotEmptyConverter}}">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="📜 Terms &amp; Conditions" 
                                   FontSize="16" 
                                   FontAttributes="Bold"
                                   TextColor="#1E3A8A"/>
                            <Label Text="{Binding Promotion.Terms}" 
                                   FontSize="12" 
                                   TextColor="#6B7280"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Frame>

                </VerticalStackLayout>

            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>