<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HotelWebApp.Mobile.ViewModels"
             x:Class="HotelWebApp.Mobile.Views.ForgotPasswordPage"
             x:DataType="viewmodels:ForgotPasswordViewModel"
             Title="Forgot Password"
             BackgroundColor="{AppThemeBinding Light=White, Dark=#121212}">

    <ScrollView>
        <Grid RowDefinitions="Auto,*">

            <!-- HERO SECTION WITH IMAGE BACKGROUND -->
            <Grid Grid.Row="0" RowDefinitions="240">
                <!-- Background Image -->
                <Image Source="hotel_lobby.jpg"
                       Aspect="AspectFill"/>

                <!-- White Overlay -->
                <BoxView BackgroundColor="White"
                         Opacity="0.70"/>

                <!-- Content -->
                <VerticalStackLayout VerticalOptions="Center" 
                                     Spacing="15"
                                     Padding="40,0">

                    <Label Text="Reset Password"
                           FontSize="32"
                           FontAttributes="Bold"
                           TextColor="#1E3A8A"
                           HorizontalTextAlignment="Center"
                           LineHeight="1.2"/>

                    <Label Text="We'll send you instructions to reset your password"
                           FontSize="15"
                           FontAttributes="Bold"
                           TextColor="#000000"
                           LineHeight="1.4"
                           HorizontalTextAlignment="Center"
                           Margin="10,0"/>

                </VerticalStackLayout>
            </Grid>

            <!-- FORM CONTENT -->
            <VerticalStackLayout Grid.Row="1"
                                 Padding="40,30"
                                 Spacing="25">

                <!-- Instructions -->
                <Label Text="Enter your email address and we'll send you a link to reset your password."
                       FontSize="15"
                       TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"
                       LineHeight="1.6"
                       HorizontalTextAlignment="Center"/>

                <!-- Email -->
                <VerticalStackLayout Spacing="8"
                                     Margin="0,10,0,0">
                    <Label Text="Email"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#6B7280, Dark=#9CA3AF}"/>
                    <Border StrokeThickness="1"
                            Stroke="{AppThemeBinding Light=#E5E7EB, Dark=#374151}"
                            StrokeShape="RoundRectangle 10"
                            BackgroundColor="{AppThemeBinding Light=#F9FAFB, Dark=#1F2937}">
                        <Entry Text="{Binding Email}"
                               Placeholder="your@email.com"
                               Keyboard="Email"
                               TextColor="{AppThemeBinding Light=#1F2937, Dark=#E5E7EB}"
                               PlaceholderColor="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}"
                               FontSize="15"
                               Margin="12,8"/>
                    </Border>
                </VerticalStackLayout>

                <!-- Error Message -->
                <Frame IsVisible="{Binding HasError}"
                       BackgroundColor="#FEE2E2"
                       BorderColor="#EF4444"
                       CornerRadius="10"
                       Padding="15"
                       HasShadow="False"
                       Margin="0,5,0,0">
                    <Label Text="{Binding ErrorMessage}"
                           TextColor="#991B1B"
                           FontSize="14"
                           LineHeight="1.5"/>
                </Frame>

                <!-- Loading Indicator -->
                <ActivityIndicator IsRunning="{Binding IsBusy}"
                                   IsVisible="{Binding IsBusy}"
                                   Color="#1E3A8A"
                                   HeightRequest="40"
                                   Margin="0,10,0,0"/>

                <!-- Send Reset Link Button -->
                <Border StrokeThickness="0"
                        StrokeShape="RoundRectangle 12"
                        Padding="0"
                        HeightRequest="56"
                        BackgroundColor="#1E3A8A"
                        Margin="0,20,0,0"
                        IsVisible="{Binding IsNotBusy}">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.1" Radius="8" Offset="0,2"/>
                    </Border.Shadow>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding SendResetLinkCommand}"/>
                    </Border.GestureRecognizers>
                    <Label Text="Send Reset Link"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="White"
                           HorizontalTextAlignment="Center"
                           VerticalTextAlignment="Center"/>
                </Border>

                <!-- Divider -->
                <BoxView HeightRequest="1"
                         Color="{AppThemeBinding Light=#E5E7EB, Dark=#374151}"
                         Margin="0,30,0,20"/>

                <!-- Back to Login Button -->
                <Border StrokeThickness="2"
                        Stroke="{AppThemeBinding Light=#1E3A8A, Dark=#60A5FA}"
                        StrokeShape="RoundRectangle 12"
                        Padding="0"
                        HeightRequest="56"
                        BackgroundColor="Transparent"
                        Margin="0,0,0,40">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.05" Radius="8" Offset="0,2"/>
                    </Border.Shadow>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding BackToLoginCommand}"/>
                    </Border.GestureRecognizers>
                    <Label Text="Back to Sign In"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#1E3A8A, Dark=#60A5FA}"
                           HorizontalTextAlignment="Center"
                           VerticalTextAlignment="Center"/>
                </Border>

            </VerticalStackLayout>

        </Grid>
    </ScrollView>
</ContentPage>